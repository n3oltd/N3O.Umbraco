var PaymentObjectType,PaymentObjectStatus,ChallengeWindowSize,__extends=this&&this.__extends||function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};return function(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}}(),OpayoClient=function(){function e(e,r){this.jsonParseReviver=void 0,this.http=r||window,this.baseUrl=null!=e?e:"https://localhost:6001"}return e.prototype.chargeCard=function(e,r){var t=this,n=this.baseUrl+"/umbraco/api/Opayo/payments/{flowId}/charge";if(null==e)throw new Error("The parameter 'flowId' must be defined.");n=(n=n.replace("{flowId}",encodeURIComponent(""+e))).replace(/[?&]$/,""),e=JSON.stringify(r);return this.http.fetch(n,{body:e,method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return t.processChargeCard(e)})},e.prototype.processChargeCard=function(e){var t=this,n=e.status,o={};return e.headers&&e.headers.forEach&&e.headers.forEach(function(e,r){return o[r]=e}),200===n?e.text().then(function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)}):400===n?e.text().then(function(e){var r=""===e?null:JSON.parse(e,t.jsonParseReviver);return throwException("A server side error occurred.",n,e,o,r)}):500===n?e.text().then(function(e){return throwException("A server side error occurred.",n,e,o)}):200!==n&&204!==n?e.text().then(function(e){return throwException("An unexpected server error occurred.",n,e,o)}):Promise.resolve(null)},e.prototype.completeThreeDSecureChallenge=function(e,r,t){var n=this,o=this.baseUrl+"/umbraco/api/Opayo/payments/{flowId}/completeThreeDSecure";if(null==e)throw new Error("The parameter 'flowId' must be defined.");o=(o=o.replace("{flowId}",encodeURIComponent(""+e))).replace(/[?&]$/,""),e=new FormData;return null!=r&&e.append("CRes",r.toString()),null!=t&&e.append("PaRes",t.toString()),this.http.fetch(o,{body:e,method:"POST",headers:{}}).then(function(e){return n.processCompleteThreeDSecureChallenge(e)})},e.prototype.processCompleteThreeDSecureChallenge=function(e){var t=this,n=e.status,o={};return e.headers&&e.headers.forEach&&e.headers.forEach(function(e,r){return o[r]=e}),200===n?e.text().then(function(e){}):400===n?e.text().then(function(e){var r=""===e?null:JSON.parse(e,t.jsonParseReviver);return throwException("A server side error occurred.",n,e,o,r)}):500===n?e.text().then(function(e){return throwException("A server side error occurred.",n,e,o)}):200!==n&&204!==n?e.text().then(function(e){return throwException("An unexpected server error occurred.",n,e,o)}):Promise.resolve(null)},e.prototype.getMerchantSessionKey=function(){var r=this,e=(e=this.baseUrl+"/umbraco/api/Opayo/merchantSessionKey").replace(/[?&]$/,"");return this.http.fetch(e,{method:"GET",headers:{Accept:"application/json"}}).then(function(e){return r.processGetMerchantSessionKey(e)})},e.prototype.processGetMerchantSessionKey=function(e){var t=this,n=e.status,o={};return e.headers&&e.headers.forEach&&e.headers.forEach(function(e,r){return o[r]=e}),200===n?e.text().then(function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)}):400===n?e.text().then(function(e){var r=""===e?null:JSON.parse(e,t.jsonParseReviver);return throwException("A server side error occurred.",n,e,o,r)}):500===n?e.text().then(function(e){return throwException("A server side error occurred.",n,e,o)}):422===n?e.text().then(function(e){var r=""===e?null:JSON.parse(e,t.jsonParseReviver);return throwException("A server side error occurred.",n,e,o,r)}):200!==n&&204!==n?e.text().then(function(e){return throwException("An unexpected server error occurred.",n,e,o)}):Promise.resolve(null)},e.prototype.storeCard=function(e,r){var t=this,n=this.baseUrl+"/umbraco/api/Opayo/credentials/{flowId}/store";if(null==e)throw new Error("The parameter 'flowId' must be defined.");n=(n=n.replace("{flowId}",encodeURIComponent(""+e))).replace(/[?&]$/,""),e=JSON.stringify(r);return this.http.fetch(n,{body:e,method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(e){return t.processStoreCard(e)})},e.prototype.processStoreCard=function(e){var t=this,n=e.status,o={};return e.headers&&e.headers.forEach&&e.headers.forEach(function(e,r){return o[r]=e}),200===n?e.text().then(function(e){return""===e?null:JSON.parse(e,t.jsonParseReviver)}):400===n?e.text().then(function(e){var r=""===e?null:JSON.parse(e,t.jsonParseReviver);return throwException("A server side error occurred.",n,e,o,r)}):500===n?e.text().then(function(e){return throwException("A server side error occurred.",n,e,o)}):200!==n&&204!==n?e.text().then(function(e){return throwException("An unexpected server error occurred.",n,e,o)}):Promise.resolve(null)},e}(),ApiException=(!function(e){e.Credential="credential",e.Payment="payment"}(PaymentObjectType=PaymentObjectType||{}),!function(e){e.Complete="complete",e.Error="error",e.InProgress="inProgress"}(PaymentObjectStatus=PaymentObjectStatus||{}),!function(e){e.Small="small",e.Medium="medium",e.Large="large",e.ExtraLarge="extraLarge",e.FullScreen="fullScreen"}(ChallengeWindowSize=ChallengeWindowSize||{}),function(c){function e(e,r,t,n,o){var s=c.call(this)||this;return s.isApiException=!0,s.message=e,s.status=r,s.response=t,s.headers=n,s.result=o,s}return __extends(e,c),e.isApiException=function(e){return!0===e.isApiException},e}(Error));function throwException(e,r,t,n,o){throw null!=o?o:new ApiException(e,r,t,n,null)}export{OpayoClient,PaymentObjectType,PaymentObjectStatus,ChallengeWindowSize,ApiException};