@using Humanizer

@model ICrowdfundingViewModel

@if (Model.Page.Access.RequiresSignIn && !Model.IsSignedIn) {
    ShowModal("SignIn", Model.SignIn());
} else if (Model.Page.Access.RequiresAccount && !Model.AccountSelected) {
    if (Model.SelectAccount().AvailableAccounts.None()) {
        ShowModal("CreateAccount", Model.SelectAccount());
    } else if (Model.SelectAccount().AvailableAccounts.IsSingle()) {
        ShowModal("UpdateAccount", Model.SelectAccount());
    } else {
        ShowModal("SelectAccount", Model.SelectAccount());
    }
}


@{
    void ShowModal(string modalName, object modalViewModel) {
        @Html.CrowdfundingPartial($"~/Views/Partials/Crowdfunding/Shared/Modals/{modalName}Modal.cshtml", modalViewModel)

        <script>
        document.addEventListener("DOMContentLoaded", function () {
            const modal = document.getElementById("@modalName.Camelize()-modal");

            modal.classList.add('active');
        });
    </script>
    }
}