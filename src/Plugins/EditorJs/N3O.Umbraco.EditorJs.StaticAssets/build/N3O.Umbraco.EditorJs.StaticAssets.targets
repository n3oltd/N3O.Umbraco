<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <PropertyGroup>
        <N3OUmbracoEditorJsContentFilesPath>$(MSBuildThisFileDirectory)..\App_Plugins\N3O.Umbraco.EditorJs\**\*.*</N3OUmbracoEditorJsContentFilesPath>
        <N3OUmbracoEditorJsViewFilesPath>$(MSBuildThisFileDirectory)..\views\**\*.*</N3OUmbracoEditorJsViewFilesPath>
    </PropertyGroup>

    <Target Name="CopyN3OUmbracoEditorJsViews" BeforeTargets="Build">
        <ItemGroup>
            <N3OUmbracoEditorJsViewFiles Include="$(N3OUmbracoEditorJsViewFilesPath)"/>
        </ItemGroup>
        <Message Text="Copying EditorJS view files: $(N3OUmbracoEditorJsViewFilesPath) - #@(N3OUmbracoEditorJsViewFiles->Count()) files" Importance="high"/>
        <Copy SourceFiles="@(N3OUmbracoEditorJsViewFiles)"
              DestinationFiles="@(N3OUmbracoEditorJsViewFiles->'$(MSBuildProjectDirectory)\Views\%(RecursiveDir)%(Filename)%(Extension)')"
              SkipUnchangedFiles="true"/>
    </Target>
    
    <Target Name="CopyN3OUmbracoEditorJsAssets" BeforeTargets="Build">
        <ItemGroup>
            <N3OUmbracoEditorJsContentFiles Include="$(N3OUmbracoEditorJsContentFilesPath)"/>
        </ItemGroup>
        <Message Text="Copying N3O EditorJs files: $(N3OUmbracoEditorJsContentFilesPath) - #@(N3OUmbracoEditorJsContentFiles->Count()) files" Importance="high"/>
        <Copy SourceFiles="@(N3OUmbracoEditorJsContentFiles)"
              DestinationFiles="@(N3OUmbracoEditorJsContentFiles->'$(MSBuildProjectDirectory)\App_Plugins\N3O.Umbraco.EditorJs\%(RecursiveDir)%(Filename)%(Extension)')"
              SkipUnchangedFiles="true"/>
    </Target>

    <Target Name="ClearN3OUmbracoEditorJsAssets" BeforeTargets="Clean">
        <ItemGroup>
            <N3OUmbracoEditorJsDir Include="$(MSBuildProjectDirectory)\App_Plugins\N3O.Umbraco.EditorJs\"/>
        </ItemGroup>
        <Message Text="Clear old N3O EditorJs files" Importance="high"/>
        <RemoveDir Directories="@(N3OUmbracoEditorJsDir)"/>
    </Target>

</Project>